<div id="user-list"></div>
<div id="pagination-controls">
    <button id="prev" disabled>Previous</button>
    <span id="current-page">Page 1</span>
    <button id="next">Next</button>
</div>

<script>
    const apiUrl = "/admin/users";

    function renderUsers(users) {
        const userList = document.getElementById("user-list");
        userList.innerHTML = "";
        users.forEach((user) => {
            const userDiv = document.createElement("div");
            userDiv.innerHTML = `
                <p><strong>${user.name}</strong> (${user.email})</p>
                <img src="${user.avatar || 'default-avatar.png'}" alt="${user.name}" width="50" />
            `;
            userList.appendChild(userDiv);
        });
    }

    // Hàm cập nhật điều khiển phân trang
    function updatePaginationControls(currentPage, totalPages) {
        document.getElementById("current-page").innerText = `Page ${currentPage}`;
        document.getElementById("prev").disabled = currentPage === 1;
        document.getElementById("next").disabled = currentPage === totalPages;
    }

    // Hàm lấy dữ liệu từ server
    function fetchPage(page = 1) {
        fetch(`${apiUrl}?page=${page}`)
            .then((response) => {
                if (!response.ok) throw new Error("Lỗi khi lấy dữ liệu từ server");
                return response.json();
            })
            .then((data) => {
                renderUsers(data.users); // Render danh sách người dùng
                updatePaginationControls(data.currentPage, data.totalPages); // Cập nhật điều khiển phân trang
            })
            .catch((error) => console.error("Lỗi:", error));
    }

    // Gắn sự kiện cho các nút phân trang
    document.getElementById("prev").addEventListener("click", () => {
        const currentPage = parseInt(document.getElementById("current-page").innerText.split(" ")[1]);
        fetchPage(currentPage - 1);
    });

    document.getElementById("next").addEventListener("click", () => {
        const currentPage = parseInt(document.getElementById("current-page").innerText.split(" ")[1]);
        fetchPage(currentPage + 1);
    });

    fetchPage();
</script>
