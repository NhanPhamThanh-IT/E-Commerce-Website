<div class="auth-container" id="signup-container">
    <h2 class="text-2xl font-semibold mb-4">Create an account</h2>
    <form id="signupForm" class="space-y-4">
        <div class="form-group">
            <label for="name" class="block text-sm font-medium">Name</label>
            <input type="text" class="form-input w-full p-2 border border-gray-300 rounded-md" id="name" name="name" placeholder="Name" required>
        </div>
        <div class="form-group">
            <label for="email" class="block text-sm font-medium">Email</label>
            <input type="email" class="form-input w-full p-2 border border-gray-300 rounded-md" id="email" name="email" placeholder="Email" required>
        </div>
        <div class="form-group">
            <label for="password" class="block text-sm font-medium">Password</label>
            <input type="password" class="form-input w-full p-2 border border-gray-300 rounded-md" id="password" name="password" placeholder="Password" required>
        </div>
        <button type="submit" class="w-full mt-3 bg-gray-800 text-white py-2 rounded-md hover:bg-gray-700">Sign Up</button>
    </form>
    <div class="toggle-link text-center mt-4">
        Already have an account? <a href="/login" class="text-blue-500 hover:underline">Log in</a>
    </div>
    <div class="text-center mt-3">
        <small>By clicking continue, you agree to our <a href="#" class="text-blue-500 hover:underline">Terms of Service</a> and <a href="#" class="text-blue-500 hover:underline">Privacy Policy</a>.</small>
    </div>
</div>

<script>
document.getElementById('signupForm').addEventListener('submit', async function(e) {
    e.preventDefault(); // Prevent the default form submission
    
    const name = document.getElementById('name').value;
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    
    const formData = {
        name: name,
        email: email,
        password: password
    };

    try {
        const response = await fetch('/register', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(formData)
        });

        const data = await response.json();
        console.log(data)
        if (response.ok) {
            alert('Registration successful!');
            // Redirect to login or home page if needed
            window.location.href = '/login';
        } else {
            alert(`Error: ${data.desc || 'Registration failed'}`);
        }
    } catch (error) {
        alert('Something went wrong. Please try again later.');
    }
});
</script>
